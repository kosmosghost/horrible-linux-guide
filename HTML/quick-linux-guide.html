<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>The Unofficial Linux Guide</title>
  <style>
    html {
      line-height: 1.5;
      font-family: Georgia, serif;
      font-size: 20px;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      word-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 1em;
      }
    }
    @media print {
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
      font-size: 85%;
      margin: 0;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title">The Unofficial Linux Guide</h1>
<p class="author">Kosmos Ghost</p>
</header>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#filesystems">Filesystems</a>
<ul>
<li><a href="#btrfs">BTRFS</a>
<ul>
<li><a href="#formatting">Formatting</a></li>
<li><a href="#defragment">Defragment</a></li>
<li><a href="#mounting-and-compression">Mounting and Compression</a></li>
<li><a href="#scrub">Scrub</a></li>
</ul></li>
<li><a href="#ext4">EXT4</a></li>
</ul></li>
<li><a href="#security">Security</a>
<ul>
<li><a href="#cryptsetup">Cryptsetup</a></li>
<li><a href="#chmod">CHMOD</a></li>
</ul></li>
<li><a href="#tools">Tools</a>
<ul>
<li><a href="#pandoc">Pandoc</a></li>
<li><a href="#wget">Wget</a></li>
<li><a href="#apt-cacher-ng">Apt-Cacher-NG</a></li>
</ul></li>
<li><a href="#containers">Containers</a></li>
<li><a href="#devices">Devices</a>
<ul>
<li><a href="#loop-devices">Loop Devices</a></li>
</ul></li>
<li><a href="#file-manipulation">File Manipulation</a>
<ul>
<li><a href="#find">find</a></li>
<li><a href="#rsync">rsync</a></li>
</ul></li>
<li><a href="#shell">Shell</a>
<ul>
<li><a href="#detach-processes-from-shell">Detach processes from shell</a></li>
</ul></li>
</ul>
</nav>
<h1 id="filesystems">Filesystems</h1>
<h2 id="btrfs">BTRFS</h2>
<h3 id="formatting">Formatting</h3>
<p>In order to format the filesystem for a single partition simply using:</p>
<pre><code>mkfs.btrfs /dev/($DISK)</code></pre>
<p>When using raid you must specify:</p>
<pre><code>mkfs.btrfs -m ($RAID) -d ($RAID) /dev/($DISK) /dev/($DISK)</code></pre>
<p>-m: specify how the metadata will be stored.</p>
<p>-d: specify how the data will be stored.</p>
<p>For example: If you want to create a two disk set in raid1, do the following:</p>
<pre><code>mkfs.btrfs -m raid1 -d raid1 /dev/sda /dev/sdb</code></pre>
<h3 id="defragment">Defragment</h3>
<p>To defragment your volumes you can:</p>
<pre><code>sudo btrfs fi defragment ($OPTIONS) ($TARGET)</code></pre>
<p>This will defragment all files in the root. Example:</p>
<pre><code>sudo btrfs filesystem defragment /</code></pre>
<p>You can use the defragment command to compress all the uncompressed files on the volume.</p>
<pre><code>sudo btrfs fi defragment -rfc($COMPRESSION_TYPE) &amp;(TARGET)</code></pre>
<p>An example for defragmenting and compressing the root:</p>
<pre><code>sudo btrfs fi defragment -rfclzo /</code></pre>
<h3 id="mounting-and-compression">Mounting and Compression</h3>
<p>Compression:</p>
<p>btrfs uses multiple compression methods.</p>
<p>ZLIB – slower, higher compression ratio (uses zlib level 3 setting, you can see the zlib level difference between 1 and 6 in zlib sources). Level from 1-9.</p>
<p>LZO – faster compression and decompression than zlib, worse compression ratio, designed to be fast</p>
<p>ZSTD – (since v4.14) compression comparable to zlib with higher compression/decompression speeds and different ratio levels (details) Level from 1 - 15.</p>
<p>To mount a btrfs filesystem with compression use:</p>
<pre><code>sudo mount /dev/($DISK) ($MOUNTFOLDER) -o compress=($TYPE)</code></pre>
<p>To force compression use:</p>
<pre><code>sudo mount /dev/($DISK) ($MOUNTFOLDER) -o compress-force=($TYPE)</code></pre>
<p>Example:</p>
<pre><code>sudo mount /dev/sda mountfolder -compress=zstd:10</code></pre>
<p>Using compression with fstab:</p>
<pre><code>($UUID) ($MOUNTPOINT) btrfs default,auto,compress=($TYPE) 0 0</code></pre>
<h3 id="scrub">Scrub</h3>
<p>Running scrub will check the filesystem for errors and can be ran with:</p>
<pre><code>sudo btrfs scrub start ($TARGET)</code></pre>
<p>To check the status of a scrub run:</p>
<pre><code>sudo btrfs scrub status ($TARGET)</code></pre>
<p>Examples:</p>
<pre><code>sudo btrfs scrub start /</code></pre>
<pre><code>sudo btrfs scrub status /</code></pre>
<h2 id="ext4">EXT4</h2>
<h1 id="security">Security</h1>
<h2 id="cryptsetup">Cryptsetup</h2>
<h2 id="chmod">CHMOD</h2>
<p>7 read, write and execute rwx 111</p>
<p>6 read and write rw- 110</p>
<p>5 read and execute r-x 101</p>
<p>4 read only r– 100</p>
<p>3 write and execute -wx 011</p>
<p>2 write only -w- 010</p>
<p>1 execute only –x 001</p>
<p>0 none — 000</p>
<h1 id="tools">Tools</h1>
<h2 id="pandoc">Pandoc</h2>
<h2 id="wget">Wget</h2>
<h2 id="apt-cacher-ng">Apt-Cacher-NG</h2>
<h1 id="containers">Containers</h1>
<h1 id="devices">Devices</h1>
<h2 id="loop-devices">Loop Devices</h2>
<h1 id="file-manipulation">File Manipulation</h1>
<h2 id="find">find</h2>
<h2 id="rsync">rsync</h2>
<h1 id="shell">Shell</h1>
<h2 id="detach-processes-from-shell">Detach processes from shell</h2>
</body>
</html>
